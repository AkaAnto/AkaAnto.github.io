<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Test github IO </title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <!-- CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <style>

        .week_day{

            background-color: green;
        }

        .week_end_day{

            background-color: yellow;
        }

        .holiday{

            background-color: orange;
        }

        .invalid_day{

            background-color: gray;
        }

    </style>

</head>
<body>

    <div class="container-fluid">

        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">

                <div class="col-lg-10 col-md-10 col-sm-10 col-xs-10 col-lg-offset-1 col-md-offset-1 col-sm-offset-1 col-xs-offset-1">
                    <div class="clearfix" style="margin-top: 100px"> </div>
                    <form class="form-inline" action="#" method="post" id="info_form">
                        <div class="form-group">
                            <label for="start_date">Start Date</label>
                            <input type="date" class="form-control" id="start_date" >
                        </div>
                        <div class="form-group">
                            <label for="number_of_days">Number of Days</label>
                            <input type="number" class="form-control" id="number_of_days" placeholder="17">
                        </div>

                        <div class="form-group">
                            <label for="country_code">Country Code</label>
                            <input type="text" class="form-control" id="country_code" placeholder="US">
                        </div>
                        <button type="submit" class="btn btn-primary">Calculate</button>
                    </form>


                </div>
                <div class="clearfix" > </div>
                <div class="row" style="margin-top: 30px">
                    <div class="table-responsive col-lg-5">
                        <table class="table" id="days">
                            <thead>
                            <tr>
                                <th>S</th>
                                <th>M</th>
                                <th>T</th>
                                <th>W</th>
                                <th>T</th>
                                <th>F</th>
                                <th>S</th>
                            </tr>
                            </thead>
                            <tbody>

                            </tbody>
                        </table>
                    </div>
                </div>


            </div>


        </div>


    </div>

    <!-- JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

    <script type="text/javascript">

        $('#info_form').submit(function(){

            var start_date_value = $('#start_date').val();
            var number_of_days_value = $('#number_of_days').val();
            var country_code_value = $('#country_code').val();


            var day_value =  start_date_value.split('-')[2];
            var month_value =  start_date_value.split('-')[1];
            var year_value =  start_date_value.split('-')[0];


            var holidays  = {};
            var request_url = 'http://holidayapi.com/v1/holidays?country=' + country_code_value + '&year=' + year_value + '&month=' + month_value ;

            $.ajax({
                url: request_url,
                type: 'GET',
                crossDomain: true,
                success: function(response) {

                    alert('Next Holidays response ' +  JSON.stringify(response.holidays));
                    var start_date_date = new Date(month_value+ '/' +day_value+ '/'+ year_value);
                    var end_date_date = new Date();
                    end_date_date.setTime( start_date_date.getTime() + number_of_days_value * 86400000 );
                    alert('Display calendar from '+ start_date_date.toString() + ' To ' +end_date_date.toString());
                    $('table#days').find('tbody').append('<tr> </tr>');
                    for (var i =0; i<= number_of_days_value; i++){
                         var display_date = new Date();
                         display_date.setTime( start_date_date.getTime() + i * 86400000 );
                         console.log(display_date.toString());
                        
                    }

                },
                error: function() { alert('Failed!'); }
            });

            return false;
        });

    </script>



</body>
</html>



